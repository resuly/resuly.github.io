---
layout: post
title: "时间序列预测模型应用案例——苏州公共自行车系统"
date: "2017-09-15 00:00:00 +0800"
author: "resuly"
header-img: "img/post-bg-23.jpg"
catalog: true
tags:
  - RNN
  - 随机森林
  - 决策树
  - 共享单车
  - 神经网络
---

公共自行车为公民带来了许多便利，并成为公共交通系统的重要补充。对于车桩类型的停放的服务，不同时段对应的存放数量有很大变化。运营公司通常会根据经验重新分配各个站点之间的自行车数量，所以本文主要针对苏州永安行公共自行车系统的车桩进行短时交通预测分析，提高管理效率。在预测模型方面，分别使用了循环神经网络和决策树中的模型。

## 数据
![](/img/in_post/2018/05/stations3.jpg)

通过对各个站点可借车辆数的不间断监控，我们得到了数个月频次为一分钟的可用车辆数的变化数据。并选区站点编号635、648、628三个车站进行研究。
![](/img/in_post/2018/05/sn.jpg)
通过三个站的总体数量变化图可以看出，每个车站基本上变化的频率和趋势大致相同，夜里往往没有车，白天可能会有两个用车高峰（缺车）。

## 短时预测
我们对最小时间间隔和模型输入长度进行了分组实验。最小时间间隔分别为1、5、10分钟，输入长度分为5、10、20、30四种。其中5分钟和10分钟的时间间隔为时间段内的平均值。预测目标为1分钟的短时流量。分别使用GRU、LSTM、随机森林三种模型对以上数据进行测试。
![](/img/in_post/2018/05/20180520193724.png)
尽管随机森林使用CPU，RNN使用GPU，但在时间方面随机森林还是遥遥领先。三种模型的预测结果对比如以下图所示：
![](/img/in_post/2018/05/figure_12.jpg)
![](/img/in_post/2018/05/figure_3D_9_2.jpg)

## 总结

通过以上的误差对比图，以及时间间隔、输出长度、误差三者之间的三维对比图可以发现：

- 三个模型的误差表现差异不大。
- 两个RNN（LSTM和GRU）和随机森林都能够以可接受的误差和比较精度实现良好的性能。
- 随机森林在训练时间方面更具优势，而具有复杂结构的RNN在长期预测上具有微弱优势。
- 实际数据与预测值之间的最大差异仅为1或2辆自行车。

但预测结果为1分钟的结果，缺乏一定的实用意义。下一步的工作为改进预测输出对象，提高预测时段长度，让本工作可以实际运用到运营调度当中。
